<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Tempo de Florescer</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/nav.css">
    <link rel="stylesheet" href="./css/responsivo.css">
</head>
<body>
    <nav>
        <div class="logo">
            <img src="./img/novalogo.png" alt="logo">
        </div>
        <div id="navContainer" class="alinhamento">
            <ul>
                <li><a href="./index.html" class="active">Home</a></li> 
                <li><a href="./quemsomos.html">Quem somos</a></li>
                <li><a href="./contatos.html">Contato</a></li>
                <li><a href="./doacao.html">Doe</a></li>
                <li><a href="./voluntario.html">Volunt치rios</a></li>
                <li><a href="./entrarempresa.html">Empresas</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <h1>Tempo de Florescer</h1>
        <div>
            <a href="./doacao.html">
                <button>Doe j치</button>
            </a>
        </div>
    </main>

    <footer>
        <p>2025 - Tempo de Florescer. Todos os direitos reservados</p>
        <p>Entre em contato pelo email: institutotempodeflorescer@gmail.com</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const NAV_CONTAINER = document.getElementById('navContainer');

            // Menu Est치tico
            const menuEstaticoLinks = `
                <li><a href="./index.html" class="active">Home</a></li>
                <li><a href="./quemsomos.html">Quem somos</a></li>
                <li><a href="./contatos.html">Contato</a></li>
                <li><a href="./doacao.html">Doe</a></li>
                <li><a href="./voluntarios.html">Volunt치rios</a></li>
                <li><a href="./entrarempresa.html">Empresas</a></li>
            `;

            // Menu para usu치rio logado
            const menuLogadoHTML = (voluntarioId, nomeVoluntario) => `
                <ul>
                    <li><a href="./index.html" class="active">Home</a></li>
                    <li><a href="./quemsomos.html">Quem somos</a></li>
                    <li><a href="./contatos.html">Contato</a></li>
                    <li><a href="./doacao.html">Doe</a></li>
                    <li><a href="./voluntarios.html">Volunt치rios</a></li>
                    <li><a href="./perfil.html?id=${voluntarioId}">游녻 Perfil (${nomeVoluntario.split(' ')[0]})</a></li>
                    <li><a href="#" id="btnLogout">Sair</a></li>
                </ul>
            `;

            // Fun칞칚o de logout
            const setupLogout = () => {
                const btnLogout = document.getElementById('btnLogout');
                if (btnLogout) {
                    btnLogout.addEventListener('click', (e) => {
                        e.preventDefault();
                        localStorage.removeItem('token');
                        window.location.reload();
                    });
                }
            };

            // Verifica login
            const verificarEcarregarNav = () => {
                try {
                    const token = localStorage.getItem('token');
                    if (token) {
                        const payload = JSON.parse(atob(token.split('.')[1]));
                        NAV_CONTAINER.innerHTML = menuLogadoHTML(payload.id, payload.nome || 'Volunt치rio');
                        setupLogout();
                    } else {
                        NAV_CONTAINER.innerHTML = `<ul>${menuEstaticoLinks}</ul>`;
                    }
                } catch (error) {
                    console.error(error);
                    NAV_CONTAINER.innerHTML = `<ul>${menuEstaticoLinks}</ul>`;
                }
            };

            verificarEcarregarNav();
        });
    </script>
</body>
</html>
