<!DOCTYPE html>
<html lang="pt-BR">

<head>
    Â  Â 
    <meta charset="UTF-8">
    Â  Â 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    Â  Â  <title>Tempo de Florescer - Seja VoluntÃ¡rio</title>
    Â  Â 
    <link rel="stylesheet" href="./voluntarios.css">
    Â  Â 
    <link rel="stylesheet" href="./css/responsivo.css">
    Â  Â 
</head>

<body>

    Â  Â  <header class="header">
        <nav>
            <div>
                <img src="./img/novalogo.png" alt="Logo da organizaÃ§Ã£o">
            </div>

            <div id="navContainer" class="alinhamento">
            </div>
        </nav>
        Â  Â 
    </header>

    Â  Â  <section class="hero">
        Â  Â  Â  Â  <div class="leaf-decoration"></div>
        Â  Â  Â  Â  <h1>SEJA A SEMETE: FAÃ‡A PARTE DO FLORESCER</h1>
        Â  Â  Â  Â  <h2>DOE SEU TEMPO E SUAS HABILIDADES POR CAUSAS AMBIENTAIS E SOCIAIS</h2>
        Â  Â  Â  Â  <p>TEMOS O LUGAR CERTO ESPERANDO POR VOCÃŠ!</p>
        Â  Â  </section>

    Â  Â  <section class="areas">
        Â  Â  Â  Â  <h2 class="section-title">Onde seu tempo pode florescer?</h2>
        Â  Â  Â  Â  <div class="areas-container">
            Â  Â  Â  Â  Â  Â  <div class="area-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <img src="../reflorestamento.png" alt="Reflorestamento">
                Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content">
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Reflorestamento e PreservaÃ§Ã£o</h3>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>AÃ§Ãµes de campo, plantio, manejo e recuperaÃ§Ã£o de Ã¡reas degradadas.</p>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Presencial</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Meio Ambiente</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-candidatar">Me candidatar</a>
                    Â  Â  Â  Â  Â  Â  Â  Â  </div>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="area-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <img src="../cultivocomunitario.png" alt="Cultivo ComunitÃ¡rio">
                Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content">
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Cultivo e Estufas ComunitÃ¡rias</h3>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Cuidado com horta, produÃ§Ã£o de mudas e educaÃ§Ã£o alimentar.</p>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Presencial</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Meio Ambiente</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-candidatar">Me candidatar</a>
                    Â  Â  Â  Â  Â  Â  Â  Â  </div>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="area-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <img src="../aulas.png" alt="Campanhas Educativas">
                Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content">
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Campanhas Educativas</h3>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>AÃ§Ãµes que levam informaÃ§Ãµes prÃ¡ticas sobre sustentabilidade para escolas e
                        comunidades.</p>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Presencial</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Comunidade</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-candidatar">Me candidatar</a>
                    Â  Â  Â  Â  Â  Â  Â  Â  </div>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="area-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <img src="../upcycling.png" alt="Upcycling">
                Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content">
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Upcycling e Moda SustentÃ¡vel</h3>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Atividades que transformam produtos descartados, visando o aproveitamento de
                        forma criativa e consciente.</p>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Presencial</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag">Arte/Design</span>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="btn-candidatar">Me candidatar</a>
                    Â  Â  Â  Â  Â  Â  Â  Â  </div>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  </div>
        Â  Â  </section>

    Â  Â  <section class="testimonials">
        Â  Â  Â  Â  <h2 class="section-title">O que dizem nossas sementes?</h2>
        Â  Â  Â  Â  <div class="testimonials-container">
            Â  Â  Â  Â  Â  Â  <div class="testimonial-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <p>"Comecei com muito medo, porÃ©m a forÃ§a da comunidade me transformou... Hoje o Tempo
                    de Florescer Ã© a minha segunda famÃ­lia."</p>
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="author">- Ana F. Souza</span>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="testimonial-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <p>"Me inscrevi sem saber ao certo o que esperar, mas encontrei propÃ³sito e satisfaÃ§Ã£o.
                    Cada atividade me faz perceber o quanto pequenas aÃ§Ãµes transformam vidas."</p>
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="author">- Carla M. Ribeiro</span>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="testimonial-card">
                Â  Â  Â  Â  Â  Â  Â  Â  <p>"Entrei achando que ia sÃ³ separar lixo... agora jÃ¡ dei nome pras minhas minhocas!
                    Antes, nem sabia que papel nÃ£o Ã© tudo que joga papel no chÃ£o. A ONG despertou meu lado social do
                    plantio e reciclagem."</p>
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="author">- Lucas P. Andrade</span>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  </div>
        Â  Â  Â  Â  <div class="newsletter-form">
            Â  Â  Â  Â  Â  Â  <p>Receba aqui sua experiÃªncia:</p>
            Â  Â  Â  Â  Â  Â  <input type="email" placeholder="Seu melhor e-mail">
            Â  Â  Â  Â  Â  Â  <button>Enviar</button>
            Â  Â  Â  Â  </div>
        Â  Â  </section>

    Â  Â  <section class="process">
        Â  Â  Â  Â  <div class="process-header">
            Â  Â  Â  Â  Â  Â  ðŸŒ± Nosso processo em 3 Passos
            Â  Â  Â  Â  </div>
        Â  Â  Â  Â  <div class="steps-container">
            Â  Â  Â  Â  Â  Â  <div class="step">
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="step-number">1</span>
                Â  Â  Â  Â  Â  Â  Â  Â  <h3>Cadastra-se</h3>
                Â  Â  Â  Â  Â  Â  Â  Â  <p>Crie ou Entre na sua conta e explique o por que vocÃª deseja esta vaga.</p>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="step">
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="step-number">2</span>
                Â  Â  Â  Â  Â  Â  Â  Â  <h3>Receba a ConfirmaÃ§Ã£o</h3>
                Â  Â  Â  Â  Â  Â  Â  Â  <p>Nossa equipe encontra a vaga e envia as informaÃ§Ãµes por e-mail.</p>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  Â  Â  <div class="step">
                Â  Â  Â  Â  Â  Â  Â  Â  <span class="step-number">3</span>
                Â  Â  Â  Â  Â  Â  Â  Â  <h3>Comece a Plantar</h3>
                Â  Â  Â  Â  Â  Â  Â  Â  <p>Participe e inicie os trabalhos.</p>
                Â  Â  Â  Â  Â  Â  </div>
            Â  Â  Â  Â  </div>
        Â  Â  Â  Â  <div class="start-now">
            Â  Â  Â  Â  Â  Â  <a href="./entrar.html">Quero comeÃ§ar agora!</a>
            Â  Â  Â  Â  Â  Â  <p class="doubt-contact">Tenho uma dÃºvida. <a href="./contatos.html">Contato</a></p>
            Â  Â  Â  Â  </div>
        Â  Â  </section>

    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>AÃ§Ã£o NecessÃ¡ria</h2>
            <p>VocÃª nÃ£o estÃ¡ logado. Para se candidatar a esta vaga, por favor, entre na sua conta ou crie um novo
                cadastro.</p>
            <div class="modal-actions">
                <button id="btnModalEntrar" class="btn-primary">Entrar / Criar Conta</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const BASE_URL = 'http://localhost:3001';

            // Elemento que irÃ¡ receber o menu ou o perfil
            const navContainer = document.getElementById('navContainer');

            // Menu EstÃ¡tico (Links) em formato de string HTML (serÃ¡ injetado se NÃƒO logado)
            const menuEstaticoHTML = `
                <ul>
                    <li><a href="./index.html">Home</a></li> 
                    <li><a href="./quemsomos.html">Quem somos</a></li>
                    <li><a href="./contatos.html">Contato</a></li>
                    <li><a href="./doacao.html">Doe</a></li>
                    <li><a href="./voluntarios.html">VoluntÃ¡rios</a></li>
                    <li><a href="entrarempresa.html">Empresas</a></li> 
                </ul>
            `;

            // --- FUNÃ‡Ã•ES DE CONTROLE DE MODAL ---

            const authModal = document.getElementById('authModal');
            const closeModal = document.querySelector('.close-button');

            const hideModal = () => {
                if (authModal) authModal.style.display = 'none';
            };

            if (closeModal) closeModal.addEventListener('click', hideModal);
            window.addEventListener('click', (event) => {
                if (event.target === authModal) {
                    hideModal();
                }
            });

            // --- FUNÃ‡ÃƒO DE LOGOUT ---

            const setupLogout = () => {
                const btnLogout = document.getElementById('btnLogout');
                if (btnLogout) {
                    btnLogout.addEventListener('click', async (e) => {
                        e.preventDefault();
                        // Aqui vocÃª chamaria sua rota de logout do backend
                        console.log("UsuÃ¡rio deslogado (simulaÃ§Ã£o).");
                        window.location.reload();
                    });
                }
            };

            // --- FUNÃ‡ÃƒO PRINCIPAL: VERIFICAR E CARREGAR CONTEÃšDO ---

            const verificarEcarregarNav = async () => {
                try {
                    const response = await fetch(`${BASE_URL}/api/auth/status`);
                    const data = await response.json();

                    if (data.isLoggedIn && data.userType === 'voluntario') {
                        // 1. LOGADO: Carrega o Mini-Perfil do arquivo externo
                        const perfilResponse = await fetch('./mini-profile.html');
                        const perfilHTML = await perfilResponse.text();

                        navContainer.innerHTML = perfilHTML;

                        // 2. Popula os dados
                        const nomeVoluntario = document.getElementById('nomeVoluntario');
                        if (nomeVoluntario) nomeVoluntario.textContent = `OlÃ¡, ${data.name || 'VoluntÃ¡rio'}!`;

                        // 3. Atribui a funÃ§Ã£o de Logout
                        setupLogout();

                    } else {
                        // NÃƒO LOGADO: Injeta o Menu EstÃ¡tico
                        navContainer.innerHTML = menuEstaticoHTML;

                        // Configura o botÃ£o "Entrar / Criar Conta" do modal
                        const btnModalEntrar = document.getElementById('btnModalEntrar');
                        if (btnModalEntrar) {
                            btnModalEntrar.addEventListener('click', () => {
                                window.location.href = './criar.html';
                            });
                        }
                    }
                } catch (error) {
                    console.error('Erro de conexÃ£o ou carregamento:', error);
                    // Em caso de erro, exibe o menu estÃ¡tico como fallback
                    navContainer.innerHTML = menuEstaticoHTML;
                    alert('Erro de conexÃ£o com o servidor. O menu padrÃ£o foi carregado.');
                }
            };

            verificarEcarregarNav(); // Executa ao carregar a pÃ¡gina


            // 4. LÃ“GICA DO CLIQUE NOS BOTÃ•ES (VERIFICA O STATUS NOVAMENTE)
            const btnCandidatarList = document.querySelectorAll('.btn-candidatar');

            btnCandidatarList.forEach(btnCandidatar => {
                btnCandidatar.onclick = async (e) => {
                    e.preventDefault();

                    try {
                        const response = await fetch(`${BASE_URL}/api/auth/status`);
                        const data = await response.json();

                        if (data.isLoggedIn && data.userType === 'voluntario') {
                            alert('Sucesso! VocÃª estÃ¡ logado e pode prosseguir com a candidatura.');
                            // window.location.href = '/candidatura-vaga-ativa.html'; 
                        } else {
                            // NÃƒO LOGADO: MOSTRA O MODAL!
                            if (authModal) authModal.style.display = 'flex';
                        }
                    } catch (error) {
                        console.error('Erro ao verificar status:', error);
                        alert('Erro de conexÃ£o com o servidor de autenticaÃ§Ã£o.');
                    }
                };
            });
        });
    </script>

</body>

</html>